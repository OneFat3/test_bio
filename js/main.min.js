const searchUrl="./json/id.json",container=document.getElementById("dataWrapper"),filters=document.getElementById("filters"),tableData=document.getElementById("tableData"),searchDevice=document.getElementById("searchDevice"),unitInfo=document.getElementById("unitInfo"),deviceInfo=document.getElementById("deviceInfo"),reportURL="./json/report.json",searchIndex=(e,n)=>e.findIndex((e=>e.serial===n))>=0?e.findIndex((e=>e.serial===n)):e.findIndex((e=>e.guid===n))>=0?e.findIndex((e=>e.guid===n)):e.findIndex((e=>e.bims===n))>=0?e.findIndex((e=>e.bims===n)):void 0,createInfo=e=>{unitInfo.innerHTML=`\n          <div class="col-2">\n            <img class="unitImg" src=${e.img} alt="" />\n\n          </div>\n          <div class="col-10">\n            <h1>${e.name}</h1>\n\n          </div>\n  `,deviceInfo.innerHTML=`\n    <div><span>Тип оборудования: </span> </p>${e.type}</p></div>\n    <div><span>Статус: </span> <p>${e.status}</p></div>\n    <div><span>Изготовитель: </span> <p>${e.producer}</p></div>\n    <div><span>Модель: </span> <p>${e.model}</p></div>\n    <div><span>Ответственное подразделение (ремонт): </span> <p>${e.repair}</p></div>\n    <div><span>Эксплуатирующее подразделение: </span> <p>${e.operating}</p></div>\n    <div><span>МОЛ: </span> <p>${e.mol}</p></div>\n    <div><span>Территория: </span> <p>${e.territory}</p></div>\n    <div><span>Серийный номер: </span> <p>${e.serial}</p></div>\n    <div><span>GUID: </span> <p class="IDs">${e.guid}</p></div>\n    <div><span>Bims: </span> <p class="IDs">${e.bims}</p></div>\n    <div><span>Tam: </span> <p class="IDs">${e.tam}</p></div>\n  `},createReport=(e,n)=>{tableData.innerHTML=createTable(n),null==n?tableData.innerHTML=createTable("choose"):"items"in e[n]?e[n].items.forEach((e=>{tableBody.innerHTML+=createTableRows(e,n)})):tableData.innerHTML=createTable("noData")},createTable=e=>{switch(e){case"calibration":return'\n          <div class="tableHeader">\n                  <h2>Сalibration report</h2>\n              </div>\n              <table class="table">\n                  <thead>\n                      <tr>\n                          <th class="thead">Data</th>\n                          <th class="thead solutions">Used buffer solutions</th>\n                          <th class="thead">Slope, %\n                              Norm\n                              95-105</th>\n                          <th class="thead">Offset, mV\n                              Norm\n                              ±(0-20)</th>\n                          <th class="thead">User</th>\n                      </tr>\n                  </thead>\n                  <tbody id="tableBody">\n                      <tr></tr>\n                  </tbody>\n              </table>\n  ';case"measuring":return'\n      <div class="tableHeader">\n                  <h2>Measuring report</h2>\n              </div>\n              <table class="table">\n                  <thead>\n                      <tr>\n                          <th class="thead">Data</th>\n                          <th class="thead">???</th>\n                          <th class="thead">???</th>\n                          <th class="thead">???</th>\n                          <th class="thead">User</th>\n                      </tr>\n                  </thead>\n                  <tbody id="tableBody">\n                      <tr></tr>\n                  </tbody>\n              </table>\n  ';case"using":return'\n      <div class="tableHeader">\n                  <h2>Using report</h2>\n              </div>\n              <table class="table">\n                  <thead>\n                      <tr>\n                          <th class="thead">Data</th>\n                          <th class="thead">???</th>\n                          <th class="thead">???</th>\n                          <th class="thead">???</th>\n                          <th class="thead">User</th>\n                      </tr>\n                  </thead>\n                  <tbody id="tableBody" class="tableBody">\n                      <tr></tr>\n                  </tbody>\n              </table>\n  ';case"noData":return'\n      <div class="tableHeader intro">\n                  <h2>Нет данных</h2>\n              </div>';case"choose":return'\n      <div class="tableHeader intro">\n                  <h2>Выберите отчёт</h2>\n              </div>'}},createTableRows=(e,n)=>{document.getElementById("tableBody");switch(n){case"calibration":let n=[];return n=e.solutions.length?e.solutions.reduce(((e,n)=>e+"<br/>"+n)):"unknown",e.slope>=95&&e.slope<=105?e.slope+='<img class="checkIcon" src="img/success.svg">':e.slope+='<img class="checkIcon" src="img/error.svg">',e.offset>=-20&&e.offset<=20?e.offset+='<img class="checkIcon" src="img/success.svg">':e.offset+='<img class="checkIcon" src="img/error.svg">',`\n    <tr>\n      <td>${e.date}</td>\n      <td>${n}</td>\n      <td>${e.slope}</td>\n      <td>${e.offset}</td>\n      <td>${e.user}</td>\n    </tr>\n  `}};filters.addEventListener("submit",(function(e){e.preventDefault();const n=new FormData(this).get("workFilter");fetch(reportURL).then((e=>e.json())).then((e=>{e&&createReport(e,n)}))})),searchDevice.addEventListener("submit",(function(e){e.preventDefault();const n=new FormData(this).get("search");fetch(searchUrl).then((e=>e.json())).then((e=>{if("units"in e){let t=e.units[searchIndex(e.units,n)];t?createInfo(t):createModal(meassage)}}))}));
//# sourceMappingURL=main.min.js.map
